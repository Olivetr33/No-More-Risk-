<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NO MORE RISK! App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
  <!-- Blurred Background -->
  <div class="background-video-container">
    <video autoplay muted loop playsinline id="background-video">
      <source src="background.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="background-blur-overlay"></div>
  </div>

  <div class="app-foreground">
    <div class="app-wrapper">
      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar" aria-label="Main Navigation">
        <nav>
          <ul>
            <li class="sidebar-btn" id="startBtn" tabindex="0" title="Go to Start">Start</li>
            <li class="sidebar-btn" id="uploadDataBtn" tabindex="0" title="Upload Excel File">Upload Data</li>
            <li class="sidebar-btn" id="changeLcsmBtn" tabindex="0" title="Change LCSM">Change LCSM</li>
            <li class="sidebar-btn" id="archiveBtn" tabindex="0" title="Show Archive">Archive</li>
            <li class="sidebar-btn" id="logoutBtn" tabindex="0" title="Logout">Logout</li>
          </ul>
        </nav>
        <button class="clear-data-btn" id="clearDataBtn" title="Delete data and/or archive">Clear Data</button>
      </aside>
      <!-- Main Content -->
      <main class="main-content" id="mainContent">
        <input type="file" id="fileInput" accept=".xlsx,.xls" style="display:none" />
        <div class="sticky-sort-controls" id="stickySort"></div>
        <div class="table-container" id="tableContainer" style="display:none;">
          <table class="data-table" id="dataTable"></table>
        </div>
        <div class="archive-upload-bar" id="archiveUploadBar" style="display:none;"></div>
      </main>
    </div>
    <footer class="footer-dsgvo">
      <button class="footer-link" onclick="showPrivacy()" id="privacyLink" aria-label="Show privacy notice" title="Show privacy notice">
        Privacy
      </button>
      <a href="https://github.com/Olivetr33/risker_read-it-" class="footer-link" target="_blank" rel="noopener" aria-label="GitHub Repository" title="GitHub Repository">GitHub</a>
    </footer>
    <!-- Privacy Popup -->
    <div id="popupBg" class="popup-bg" style="display:none;">
      <div class="popup" id="popupContent">
        <button class="popup-close" onclick="hidePrivacy()" title="Close" aria-label="Close popup">×</button>
        <div id="popupInner"></div>
      </div>
    </div>
    <!-- Dialog Popup (e.g. LCSM) -->
    <div id="dialogBg" class="popup-bg" style="display:none;">
      <div class="popup" id="dialogContent">
        <div id="dialogInner"></div>
      </div>
    </div>
  </div>
  <script src="utils.js"></script>
  <script src="app.js"></script>
  <script>
    // Privacy Popup Text (English) - IDENTISCH WIE STARTMENÜ
    const privacyText = `
    <div class="privacy-popup-content">
        <h3>Privacy</h3>
        <p>
            This application is a purely local web app. <b>No data</b> is transmitted to third parties or external servers.<br>
            All files and session data remain on your device and can be deleted at any time.
        </p>
        <p>
            <b>GDPR compliance:</b> The application is designed to be fully GDPR-compliant.<br>
            No personal data is processed outside your device. No cookies or trackers are used.
        </p>
        <p style="color:#b3b3b3;font-size:0.98rem;">
            Contact for privacy inquiries: <a href="mailto:Your Local Privacy Officer">Your Local Privacy Officer</a>
        </p>
    </div>
    `;
    
    function showPrivacy() {
      document.getElementById('popupInner').innerHTML = privacyText;
      document.getElementById('popupBg').style.display = 'flex';
    }
    
    function hidePrivacy() {
      document.getElementById('popupBg').style.display = 'none';
    }
    
    document.getElementById('popupBg').addEventListener('click', function(e) {
      if (e.target === this) {
        hidePrivacy();
      }
    });
  </script>
</body>
</html>
